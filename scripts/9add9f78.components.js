var OptionCheckbox=React.createClass({displayName:"OptionCheckbox",render:function(){return React.createElement("label",{htmlFor:"option-"+this.props.questionId+"-"+this.props.value,className:"pure-checkbox"},React.createElement("input",{id:"option-"+this.props.questionId+"-"+this.props.value,type:"checkbox",name:this.props.questionId,value:this.props.value})," ",this.props.text)}}),OptionRadio=React.createClass({displayName:"OptionRadio",render:function(){return React.createElement("label",{htmlFor:"option-"+this.props.questionId+"-"+this.props.value,className:"pure-radio"},React.createElement("input",{id:"option-"+this.props.questionId+"-"+this.props.value,type:"radio",name:this.props.questionId,value:this.props.value})," ",this.props.text)}}),OptionList=React.createClass({displayName:"OptionList",render:function(){var a,b,c=this.props.options.questionId;return this.props.options.acceptsMultipleOptions?b=this.props.options.values.map(function(a){return React.createElement(OptionCheckbox,{key:a.key,text:a.text,value:a.optionId,questionId:c})}):a=this.props.options.values.map(function(a){return React.createElement(OptionRadio,{key:a.key,text:a.text,value:a.optionId,questionId:c})}),React.createElement("div",null,a||b)}}),Question=React.createClass({displayName:"Question",render:function(){return React.createElement("section",{className:"question"},React.createElement("header",{className:"question-header"},React.createElement("h2",{className:"question-title"},this.props.title)),React.createElement("div",{className:"question-options"},React.createElement(OptionList,{options:this.props.options})))}}),QuestionList=React.createClass({displayName:"QuestionList",getInitialState:function(){var a=this.props.questions.map(function(a){return React.createElement(Question,{key:a.key,title:a.title,options:a.options})});return{questions:a,sessionId:this.props.sessionId}},clearQuestionsByList:function(a){for(var b=this.state.questions,c=0;c<a.length;c++)b=b.filter(function(b){return b.key!=a[c].get("question").id});this.setState({questions:b})},handleSubmit:function(a){a.preventDefault();var b=this,c=$("#submit"),d="pure-button-disabled";c.addClass(d);var e=Parse.Object.extend("Session"),f=new e;f.id=this.props.sessionId;for(var g=[],h=$("#survey-form").serializeArray(),i=Parse.Object.extend("Question"),j=Parse.Object.extend("Option"),k=Parse.Object.extend("Result"),l=0;l<h.length;l++){var m=new i;m.id=h[l].name,m.addUnique("sessions",f);var n=new j;n.id=h[l].value;var o=new k;o.set("question",m),o.set("answer",n),o.set("session",f),g.push(o)}Parse.Object.saveAll(g).then(function(a){console.log("Saved answers",a),b.clearQuestionsByList(a)},function(a){console.log("Error",a)}).then(function(){c.removeClass(d)})},render:function(){return this.state.questions.length>0?React.createElement("div",{className:"questions"},React.createElement("h1",{className:"content-subhead"},"Current questions"),React.createElement("form",{id:"survey-form",onSubmit:this.handleSubmit,className:"pure-form"},React.createElement("div",null,this.state.questions),React.createElement("input",{id:"submit",type:"submit",value:"Submit",className:"pure-button pure-button-custom"}))):React.createElement("p",null,"There are no more questions for you at the moment. Please try again later.")}}),Chart=React.createClass({displayName:"Chart",getInitialState:function(){return{title:this.props.title,categories:this.props.categories,series:this.props.series,id:this.props.id}},componentDidMount:function(){var a=this.state.series[0];$("#"+this.state.id).highcharts({colors:["#2E3D4B","#91e8e1","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8085e8","#8d4653"],chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,backgroundColor:"transparent"},exporting:{enabled:!1},title:{text:""},tooltip:{formatter:function(){var b=this.point.total?this.point.total:a.data.map(function(a){return isNaN(a[1])?0:a[1]}).reduce(function(a,b){return a+b},0),c=this.point.percentage?this.point.percentage:100*this.point.y/b;return"<b>"+this.point.name+"</b><br />Responses: "+this.point.y+" ("+Math.round(10*c)/10+"%)<br/>Total: "+b}},xAxis:{type:"category"},yAxis:{min:0,title:{text:"Number of responses"}},legend:{itemStyle:{width:200},labelFormat:"{percentage:.1f}% - {name}"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1,format:"<b>{point.name}</b> - {point.percentage:.1f}%",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}},column:{cursor:"pointer"}},series:this.state.series,credits:{enabled:!1}})},render:function(){return React.createElement("div",{className:"results"},React.createElement("h1",{className:"content-subhead"},this.state.title),React.createElement("div",{className:"chart",id:this.state.id}))}}),Results=React.createClass({displayName:"Results",render:function(){var a=this.props.questions.map(function(a){return React.createElement("li",{key:a.key},React.createElement("a",{href:"#/results/"+a.key},a.title))});return React.createElement("div",{className:"results"},React.createElement("h1",{className:"content-subhead"},"View Results"),React.createElement("div",{className:"pure-menu pure-menu-open"},React.createElement("ul",null,a)))}});