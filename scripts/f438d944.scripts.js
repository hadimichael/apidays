!function(a){"use strict";a.credentials=function(){return{parse:{appId:"X7orCVYTq6fV5b3Ub8SbjXafpGyeJPGCA4wlvxnH",jsKey:"e8NndbRxFwtvRcbDhRbmecNRNkZHz0W4sEijfwK9"},cookieKey:"apidays15-sessionId"}}()}(APIDAYS),function(a){"use strict";a.questions=function(){var a=function(a){var b=Parse.Object.extend("Question"),c=new Parse.Query(b);c.equalTo("available",!0),c.notEqualTo("sessions",{__type:"Pointer",className:"Session",objectId:a}),c.include("options"),c.find({success:function(b){for(var c=[],d=0;d<b.length;d++){for(var e=[],f=b[d],g=f.get("options"),h=0;h<g.length;h++){var i=g[h],j=i.get("text");e.push({text:j,optionId:g[h].id,key:g[h].id})}c.push({key:b[d].id,title:b[d].get("title"),options:{questionId:b[d].id,acceptsMultipleOptions:b[d].get("acceptsMultipleOptions"),values:e}})}React.render(React.createElement(QuestionList,{questions:c,sessionId:a}),document.getElementById("content"))},error:function(a){console.error("Error: "+a.code+" "+a.message)}})};return{init:a}}()}(APIDAYS),function(a){"use strict";a.results=function(){var a=function(){var a=Parse.Object.extend("Question"),b=new Parse.Query(a);b.equalTo("available",!0),b.find({success:function(a){for(var b=[],c=0;c<a.length;c++)b.push({key:a[c].id,title:a[c].get("title")});React.render(React.createElement(Results,{questions:b}),document.getElementById("content"))},error:function(a){console.error("Error: "+a.code+" "+a.message)}})},b=function(a){var b={},c=Parse.Object.extend("Question"),d=new Parse.Query(c);d.include("options"),d.get(a).then(function(a){b.question=a;var c=Parse.Object.extend("Result"),d=new Parse.Query(c);return d.equalTo("question",a),d.include("answer"),d.find()}).then(function(a){b.results=a;var c=b.question.get("title"),d={},e=a.map(function(a){return a.get("answer")});for(var f in e){var g=e[f].get("text");d[g]=d[g]+1||1}var h=[],i=[],j=b.question.get("options");for(var k in j){var l=j[k].get("text"),m=d[l]||0;h.push(l),i.push([l,m])}var n={name:c,data:i};b.question.get("acceptsMultipleOptions")?(n.type="column",n.showInLegend=!1):(n.type="pie",n.showInLegend=!0),React.render(React.createElement(Chart,{title:c,categories:h,series:[n],id:b.question.id}),document.getElementById("content"))},function(a){console.error("Error: "+a.code+" "+a.message)})};return{showListOfQuestions:a,showResultForQuestion:b}}()}(APIDAYS),"undefined"==typeof console&&(window.console={},console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=function(){}),function(a){"use strict";a.init=function(){function b(a){crossroads.parse(a)}Parse.initialize(a.credentials.parse.appId,a.credentials.parse.jsKey),crossroads.addRoute("/",function(){if(!Cookies.enabled)return void $("#content").html("<p>You must have cookies enabled.</p>");var b=Cookies.get(a.credentials.cookieKey);if(b)a.questions.init(b);else{var c=Parse.Object.extend("Session"),d=new c;$.getJSON("http://api.ipify.org?format=json",function(b){d.set("ip",b.ip),d.save().then(function(b){Cookies.set(a.credentials.cookieKey,b.id,{expires:new Date(2015,0,1)}),a.questions.init(b.id)},function(a){console.error("Could not create session",a)})})}}),crossroads.addRoute("/results",function(){a.results.showListOfQuestions()}),crossroads.addRoute("/results/{questionId}",function(b){a.results.showResultForQuestion(b)}),crossroads.routed.add(console.log,console),hasher.initialized.add(b),hasher.changed.add(b),hasher.init()},$(document).ready(function(){a.init()})}(APIDAYS);